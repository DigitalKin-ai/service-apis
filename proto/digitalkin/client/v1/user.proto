syntax = "proto3";

package digitalkin.client.v1;

service UserService {
    // CRD
    rpc CreateUser(CreateUserRequest) returns (User);
    rpc ReadUser(ReadUserRequest) returns (stream User);
    rpc DeleteUser(DeleteUserRequest) returns (DeleteUserResponse);

    // Update
    rpc UpdateActivated(UpdateUserActivatedRequest) returns (UpdateUserActivatedResponse);
    rpc UpdateAvatar(UpdateUserAvatarRequest) returns (UpdateUserAvatarResponse);
    rpc UpdateEmail(UpdateUserEmailRequest) returns (UpdateUserEmailResponse);
    rpc UpdateFirstName(UpdateUserFirstNameRequest) returns (UpdateUserFirstNameResponse);
    rpc UpdateLastName(UpdateUserLastNameRequest) returns (UpdateUserLastNameResponse);
    rpc UpdatePassword(UpdateUserPasswordRequest) returns (UpdateUserPasswordResponse);
    rpc updateUserName(UpdateUserNameRequest) returns (UpdateUserNameResponse);
    rpc updateCustomer(UpdateCustomerRequest) returns (UpdateCustomerResponse);
    rpc UpdateSubscription(UpdateUserSubscriptionRequest) returns (UpdateUserSubscriptionResponse);
    rpc UpdateCreditAmount(UpdateUserCreditAmountRequest) returns (UpdateUserCreditAmountResponse);

    // Organization
    rpc AddOrganization(AddUserOrganizationRequest) returns (AddUserOrganizationResponse);
    rpc RemoveOrganization(RemoveUserOrganizationRequest) returns (RemoveUserOrganizationResponse);
    rpc AddKin(AddUserKinRequest) returns (AddUserKinResponse);
    rpc RemoveKin(RemoveUserKinRequest) returns (RemoveUserKinResponse);
}

// Common
message OrganizationReply {
  string id = 1;
  string name = 2;
  optional string description = 3;
  bool activated = 4;
}

message KinReply {
  string id = 1;
  string name = 2;
  optional string description = 3;
  bool activated = 4;
}

message User {
  string user_name = 1;
  optional string first_name = 3;
  optional string last_name = 4;
  string email = 5;
  optional string avatar = 6;
  repeated KinReply kins = 7;
  repeated OrganizationReply organizations = 8;
  optional string customer_id = 9;
  optional string subscription = 10;
  optional int64 credit_amount = 11;
  bool activated = 12;
  bool is_admin = 13;
}

// Create a new user
message CreateUserRequest {
    string user_name = 1;
    string email = 2;
    string password = 3;
    optional string invitation_code = 4;
    optional string first_name = 5;
    optional string last_name = 6;
}

// Read a user
message ReadUserRequest {
    string user_id = 1;
}

// Delete a user
message DeleteUserRequest {}
message DeleteUserResponse {}

// Update a user activated status
message UpdateUserActivatedRequest {
    bool activated = 1;
}
message UpdateUserActivatedResponse {}

// Update a user avatar
message UpdateUserAvatarRequest {
    string avatar = 1;
}
message UpdateUserAvatarResponse {}

// Update a user email
message UpdateUserEmailRequest {
    string email = 1;
}
message UpdateUserEmailResponse {}

// Update a user first name
message UpdateUserFirstNameRequest {
    string first_name = 1;
}
message UpdateUserFirstNameResponse {}

// Update a user last name
message UpdateUserLastNameRequest {
    string last_name = 1;
}
message UpdateUserLastNameResponse {}

// Update a user password
message UpdateUserPasswordRequest {
    string old_password = 1;
    string new_password = 2;
}
message UpdateUserPasswordResponse {}

// Update a user user name
message UpdateUserNameRequest {
    string user_name = 1;
}
message UpdateUserNameResponse {}

// Update a user customer
message UpdateCustomerRequest {
    string customer_id = 1;
}
message UpdateCustomerResponse {}

// Update a user subscription
message UpdateUserSubscriptionRequest {
    string subscription = 1;
}
message UpdateUserSubscriptionResponse {}

// Update a user credit amount
message UpdateUserCreditAmountRequest {
    int64 credit_amount = 1;
}
message UpdateUserCreditAmountResponse {}

// Add a user organization
message AddUserOrganizationRequest {
    string invitation_code = 1;
}
message AddUserOrganizationResponse {}

// Remove a user organization
message RemoveUserOrganizationRequest {
    string organization_id = 1;
}
message RemoveUserOrganizationResponse {}

// Add a user kin
message AddUserKinRequest {
    string kin_id = 1;
}
message AddUserKinResponse {}

// Remove a user kin
message RemoveUserKinRequest {
    string kin_id = 1;
}
message RemoveUserKinResponse {}

